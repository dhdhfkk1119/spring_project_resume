{{> layout/header}}

<div class="container my-5">
    <div class="card shadow-sm">
        <!-- 카드 헤더: 이력서 제목과 수정 버튼 -->
        <div class="card-header bg-light py-3">
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="h4 mb-0">이력서 상세 정보</h1>
                <a href="/resume/{{resume.resumeIdx}}/update-form" class="btn btn-outline-primary">수정하기</a>
                <form id="delete-form" action="/resume/{{resume.resumeIdx}}/delete" method="post" class="d-inline">
                    <button type="button" id="delete-btn" class="btn btn-outline-danger">삭제</button>
                </form>
            </div>
        </div>
        <hr>
        <!-- 카드 바디: 개인 정보 -->
        <div class="card-body">
            <h2 class="h5 border-bottom pb-2 mb-3">기본 정보</h2>
            <div class="row mb-4">
                <div class="col-md-6">
                    <p><strong>이름:</strong> {{resume.member.username}}</p>
                    <p><strong>나이/성별:</strong> {{resume.member.age}}세 / {{resume.member.sex}}</p>
                    <p><strong>연락처:</strong> {{resume.member.phoneNumber}}</p>
                </div>
                <div class="col-md-6">
                    <p><strong>이메일:</strong> {{resume.member.email}}</p>
                    <p><strong>주소:</strong> {{resume.member.address}}</p>
                </div>
            </div>

            <hr>

            <!-- 이력서 내용 -->
            <h2 class="h5 border-bottom pb-2 mb-3 mt-4">이력서 내용</h2>
            <div class="p-3 bg-white border rounded">
                <!-- pre 태그를 사용하면 사용자가 입력한 줄바꿈과 공백이 그대로 유지됩니다. -->
                <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: inherit; font-size: 1rem;">{{resume.resumeContent}}</pre>
            </div>


            <h2 class="h5 border-bottom pb-2 mb-3 mt-4">경력 정보</h2>
            <!-- 경력 정보가 있을 경우 순회하며 출력 -->
            {{#resume.careerList}}
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">{{corpName}}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">{{position}}</h6>
                        <p class="card-text"><small class="text-muted">{{startAt}} ~ {{endAt}}</small></p>
                        <p class="card-text" style="white-space: pre-wrap;">{{careerContent}}</p>
                    </div>
                </div>
            {{/resume.careerList}}

            <!-- [수정] ^careers를 ^resume.careerList로 변경 -->
            {{^resume.careerList}}
                <div class="text-center p-3 border rounded">
                    <p class="mb-0">입력된 경력 정보가 없습니다.</p>
                </div>
            {{/resume.careerList}}
        </div>
        <!-- 카드 푸터: 목록으로 돌아가기 버튼 -->
        <div class="mt-4">
            <a href="/resumes" class="btn btn-secondary">목록으로</a>
        </div>
    </div>
</div>

    <script>
        document.getElementById('delete-btn').addEventListener('click', function() {
            // 사용자에게 삭제 여부를 확인
            if (confirm('정말로 이 이력서를 삭제하시겠습니까? 삭제된 데이터는 복구할 수 없습니다.')) {
                // 사용자가 '확인'을 누르면 form을 전송
                document.getElementById('delete-form').submit();
            }
        });
    </script>

{{> layout/footer}}